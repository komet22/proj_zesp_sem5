<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
      
    <head>
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <link href="../static/css/f..."
           	  th:href="@{/css/global.css}"
              rel="stylesheet" media="screen" />	
    	<link href="../static/css/f..."
           	  th:href="@{/css/event.css}"
              rel="stylesheet" media="screen" />
		<title>Wydarzenie</title>
	</head>
	
    <body>
		<header>
			<h1>
				Wydarzenie
			</h1>
			<div>
				<ul> 
					<li><a th:href="@{/employee/cooperationsList/cooperation(cooperationId=${event.cooperation.cooperationId})}">Wróć do wspołpracy</a></li>
					<li><a th:href="@{/home}">Wróć do strony domowej</a></li> 
				</ul>
			</div>
		</header>
		<hr id="hr1" />
		<div id="pageContent">	
			<div id="pageBreak"></div>
			<div>	
				<table>
					<tr>
						<td>Id:</td>
						<td th:text="${event.eventId}">text</td>
						<td>Temat - </td>
						<td th:text="${event.subject}">text</td>
					</tr>
					<tr>		
						<td colspan="2" >Współpraca:</td>
						<td colspan="2" th:text="${event.cooperation.cooperationId}">text</td>
					</tr>
					<tr>
						<div th:if="${event.registrationDate != null}">		
								<td colspan="2">Data dodania:</td>
								<td colspan="2" th:text="${#dates.format(event.registrationDate, 'dd-MMM-yyyy')}">text</td>
						</div>	
						<div th:unless="${event.registrationDate != null}">
								<td colspan="2">Data dodania:</td>
								<td colspan="2">---</td>
						</div>	
					</tr>					
					<tr>
						<td colspan="2"> Treść wydarzenia: </td>
						<td colspan="2" th:text="${event.content}">text</td>
					</tr>
				</table>
			</div>
			<div id="pageBreak"></div>
			<div>
				<table>
					<tr>
						<th colspan="4"> Dokumenty: </th>
					</tr>
					<div th:if="${event.eventDocuments.size() > 0}">
						<tr>
							<th>Identyfikator</th>
							<th>Nazwa</th>
							<th>Opis</th>
							<th>Opcje</th>
						</tr>		
						<tr th:each="ed : ${event.eventDocuments}">
							<td th:text="${ed.eventDocumentId}">text</td>
							<td th:text="${ed.name}">text</td>
							<td th:text="${ed.description}">text</td>
							<td><a th:href="@{${'/employee/data/documents/' + ed.eventDocumentId }}"><span>Wyświetl</span></a></td>
						</tr>
					</div>	
					<div th:unless="${event.eventDocuments.size() > 0}">
						<tr>
							<td colspan="4">Brak dokumentów</td>
						</tr>
					</div>	
				</table>
				<div id="pageBreak"></div>
				<div>
					<a type="button" th:href="@{/employee/cooperationsList/cooperation/event/addEventDocument(eventId=${event.eventId})}" ><span>Załącz dokument</span></a>
				</div>
			</div>
		    <div id="pageBreak"></div>
			<div>
				<table>
					<tr>
						<th colspan="2"> Komentarze: </th>
					</tr>
					<div th:if="${event.eventMessages.isEmpty() != true}">		
						<tr th:each="em : ${event.eventMessages}">
							<div th:if="${em.client != null}">
								<td th:text="${em.client.toStringForCommentary()}">text</td>
							</div>
							<div th:unless="${em.client != null}">
								<td th:text="${em.employee.toStringForCommentary()}">text</td>
							</div>
							<td th:text="${em.message}">text</td>
						</tr>
					</div>	
					<div th:unless="${event.eventMessages.isEmpty() != true}">
						<tr>
							<td colspan="2">Brak wiadomości</td>
						</tr>
					</div>	
				</table>
				<div id="pageBreak"></div>
				<form id="myForm" th:action="@{/employee/cooperationsList/cooperation/event/eventMessage(eventId=${event.eventId})}" th:object="${eventMessageDTO}" method="post">
     				<div>
            			<table>
            				<tr>
            					<th colspan="2"><div>Wpisz swój komentarz: </div></th>
            				</tr>
                			<tr>
								<td>
									<textarea rows="2" cols="50" name="chatMessage"  th:field="*{chatMessage}" form="myForm" />									
									<input type="number" hidden="hidden" th:value="*{employeeId}" th:field="*{employeeId}" />
								</td>
								<td th:if="${#fields.hasErrors('chatMessage')}" th:errors="*{chatMessage}">Error</td>
                			</tr>   	
            			</table>
            			<button type="submit" id="send" >Wyślij wiadomość</button>
            		</div>
        		</form>
			</div>
		</div>
    </body>
</html>